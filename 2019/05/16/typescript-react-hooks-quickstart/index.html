<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
    
<!-- Google Analytics -->
<script>
window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
ga('create', 'UA-109126373-1', 'auto');
ga('send', 'pageview');
</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<!-- End Google Analytics -->


    

    


<!-- Baidu Push -->
<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>
<!-- End Baidu Push -->


    <meta charset="utf-8">
    
    
    
    <meta name="baidu-site-verification" content="bmvYqUCgMu">
    
    
    <link rel="canonical" href="https://frezc.github.io/2019/05/16/typescript-react-hooks-quickstart/">
    
    
    <title>React &amp; React-Hooks &amp; Typescript 快速入门 (draft) | Code for fun</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    <meta name="theme-color" content="#3F51B5">
    
    
    <meta name="keywords" content="react,typescript,react-hooks,tutorial">
    <meta name="description" content="9102年了, 学习React其实完全可以从react-hooks开始, 这也是我写这篇文章的初衷。 另外我也希望能用比较简洁的语言来解释一些相关的原理, 不过本文还是会以如何使用为主, 所以比较适合想了解个大概后快速上手去写的人。 本文主要内容是解释如何基于Typescript来写React组件, 需要你有javascript基础, 对html有一定的认识。 准备环境开发环境已经装过的可以跳过">
<meta name="keywords" content="react,typescript,react-hooks,tutorial">
<meta property="og:type" content="article">
<meta property="og:title" content="React &amp; React-Hooks &amp; Typescript 快速入门 (draft)">
<meta property="og:url" content="https://frezc.github.io/2019/05/16/typescript-react-hooks-quickstart/index.html">
<meta property="og:site_name" content="Code for fun">
<meta property="og:description" content="9102年了, 学习React其实完全可以从react-hooks开始, 这也是我写这篇文章的初衷。 另外我也希望能用比较简洁的语言来解释一些相关的原理, 不过本文还是会以如何使用为主, 所以比较适合想了解个大概后快速上手去写的人。 本文主要内容是解释如何基于Typescript来写React组件, 需要你有javascript基础, 对html有一定的认识。 准备环境开发环境已经装过的可以跳过">
<meta property="og:locale" content="zh-CN">
<meta property="og:updated_time" content="2019-08-02T13:14:31.500Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="React &amp; React-Hooks &amp; Typescript 快速入门 (draft)">
<meta name="twitter:description" content="9102年了, 学习React其实完全可以从react-hooks开始, 这也是我写这篇文章的初衷。 另外我也希望能用比较简洁的语言来解释一些相关的原理, 不过本文还是会以如何使用为主, 所以比较适合想了解个大概后快速上手去写的人。 本文主要内容是解释如何基于Typescript来写React组件, 需要你有javascript基础, 对html有一定的认识。 准备环境开发环境已经装过的可以跳过">
    
        <link rel="alternate" type="application/atom+xml" title="Code for fun" href="/atom.xml">
    
    <link rel="shortcut icon" href="/images/avatar.jpg">
    <link rel="stylesheet" href="//unpkg.com/hexo-theme-material-indigo@latest/css/style.css">
    <script>window.lazyScripts=[]</script>

    <!-- custom head -->
    

</head>

<body>
    <div id="loading" class="active"></div>

    <aside id="menu" class="hide">
  <div class="inner flex-row-vertical">
    <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menu-off">
        <i class="icon icon-lg icon-close"></i>
    </a>
    <div class="brand-wrap" style="background-image:url(/img/brand.jpg)">
      <div class="brand">
        <a href="/" class="avatar waves-effect waves-circle waves-light">
          <img src="/images/avatar.jpg">
        </a>
        <hgroup class="introduce">
          <h5 class="nickname">Freeze Crow</h5>
          <a href="mailto:frezcw@gmail.com" title="frezcw@gmail.com" class="mail">frezcw@gmail.com</a>
        </hgroup>
      </div>
    </div>
    <div class="scroll-wrap flex-col">
      <ul class="nav">
        
            <li class="waves-block waves-effect">
              <a href="/">
                <i class="icon icon-lg icon-home"></i>
                主页
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/archives">
                <i class="icon icon-lg icon-archives"></i>
                Archives
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/tags">
                <i class="icon icon-lg icon-tags"></i>
                Tags
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/categories">
                <i class="icon icon-lg icon-th-list"></i>
                Categories
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="https://github.com/Frezc" target="_blank">
                <i class="icon icon-lg icon-github"></i>
                Github
              </a>
            </li>
        
      </ul>
    </div>
  </div>
</aside>

    <main id="main">
        <header class="top-header" id="header">
    <div class="flex-row">
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light on" id="menu-toggle">
          <i class="icon icon-lg icon-navicon"></i>
        </a>
        <div class="flex-col header-title ellipsis">React &amp; React-Hooks &amp; Typescript 快速入门 (draft)</div>
        
        <div class="search-wrap" id="search-wrap">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="back">
                <i class="icon icon-lg icon-chevron-left"></i>
            </a>
            <input type="text" id="key" class="search-input" autocomplete="off" placeholder="输入感兴趣的关键字">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="search">
                <i class="icon icon-lg icon-search"></i>
            </a>
        </div>
        
        
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menuShare">
            <i class="icon icon-lg icon-share-alt"></i>
        </a>
        
    </div>
</header>
<header class="content-header post-header">

    <div class="container fade-scale">
        <h1 class="title">React &amp; React-Hooks &amp; Typescript 快速入门 (draft)</h1>
        <h5 class="subtitle">
            
                <time datetime="2019-05-15T16:24:43.000Z" itemprop="datePublished" class="page-time">
  2019-05-16
</time>


	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/DEVELOPING/">DEVELOPING</a></li></ul>

            
        </h5>
    </div>

    


</header>


<div class="container body-wrap">
    
    <aside class="post-widget">
        <nav class="post-toc-wrap post-toc-shrink" id="post-toc">
            <h4>TOC</h4>
            <ol class="post-toc"><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#准备环境"><span class="post-toc-number">1.</span> <span class="post-toc-text">准备环境</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#开发环境"><span class="post-toc-number">1.1.</span> <span class="post-toc-text">开发环境</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#创建项目"><span class="post-toc-number">1.2.</span> <span class="post-toc-text">创建项目</span></a></li></ol></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#React入门"><span class="post-toc-number">2.</span> <span class="post-toc-text">React入门</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#认识组件"><span class="post-toc-number">2.1.</span> <span class="post-toc-text">认识组件</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Inversion-of-Control"><span class="post-toc-number">2.2.</span> <span class="post-toc-text">Inversion of Control</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#JSX-TSX"><span class="post-toc-number">2.3.</span> <span class="post-toc-text">JSX(TSX)</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#JSX范式"><span class="post-toc-number">2.3.1.</span> <span class="post-toc-text">JSX范式</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#条件渲染"><span class="post-toc-number">2.3.1.1.</span> <span class="post-toc-text">条件渲染</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#列表渲染"><span class="post-toc-number">2.3.1.2.</span> <span class="post-toc-text">列表渲染</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#为什么渲染列表时需要传入key这个参数"><span class="post-toc-number">2.3.1.2.1.</span> <span class="post-toc-text">为什么渲染列表时需要传入key这个参数</span></a></li></ol></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#封装复杂的渲染逻辑"><span class="post-toc-number">2.3.1.3.</span> <span class="post-toc-text">封装复杂的渲染逻辑</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#通常我们在刚写jsx时会有疑惑，为什么需要import-react？"><span class="post-toc-number">2.3.2.</span> <span class="post-toc-text">通常我们在刚写jsx时会有疑惑，为什么需要import react？</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#状态"><span class="post-toc-number">2.4.</span> <span class="post-toc-text">状态</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#复杂状态"><span class="post-toc-number">2.4.1.</span> <span class="post-toc-text">复杂状态</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#分离逻辑（useReducer）"><span class="post-toc-number">2.4.2.</span> <span class="post-toc-text">分离逻辑（useReducer）</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#多个状态"><span class="post-toc-number">2.4.3.</span> <span class="post-toc-text">多个状态</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#为什么要按固定的顺序调用？"><span class="post-toc-number">2.4.4.</span> <span class="post-toc-text">为什么要按固定的顺序调用？</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#useEffect（组件生命周期）"><span class="post-toc-number">2.5.</span> <span class="post-toc-text">useEffect（组件生命周期）</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#React-hook"><span class="post-toc-number">2.5.1.</span> <span class="post-toc-text">React hook</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#如何监听生命周期"><span class="post-toc-number">2.5.2.</span> <span class="post-toc-text">如何监听生命周期</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#useEffect"><span class="post-toc-number">2.5.3.</span> <span class="post-toc-text">useEffect</span></a></li></ol></li></ol></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#使用typescript来写React组件"><span class="post-toc-number">3.</span> <span class="post-toc-text">使用typescript来写React组件</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#为什么要用typescript"><span class="post-toc-number">3.1.</span> <span class="post-toc-text">为什么要用typescript?</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#你需要知道的Typescript"><span class="post-toc-number">3.2.</span> <span class="post-toc-text">你需要知道的Typescript</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Type-Compatibility"><span class="post-toc-number">3.3.</span> <span class="post-toc-text">Type Compatibility</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#泛型"><span class="post-toc-number">3.4.</span> <span class="post-toc-text">泛型</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#import"><span class="post-toc-number">3.5.</span> <span class="post-toc-text">import</span></a></li></ol></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#编写可维护的组件"><span class="post-toc-number">4.</span> <span class="post-toc-text">编写可维护的组件</span></a></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#推荐阅读"><span class="post-toc-number">5.</span> <span class="post-toc-text">推荐阅读</span></a></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#常用组件和库"><span class="post-toc-number">6.</span> <span class="post-toc-text">常用组件和库</span></a></li></ol>
        </nav>
    </aside>


<article id="post-typescript-react-hooks-quickstart" class="post-article article-type-post fade" itemprop="blogPost">

    <div class="post-card">
        <h1 class="post-card-title">React & React-Hooks & Typescript 快速入门 (draft)</h1>
        <div class="post-meta">
            <time class="post-time" title="2019-05-16 00:24:43" datetime="2019-05-15T16:24:43.000Z" itemprop="datePublished">2019-05-16</time>

            
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/DEVELOPING/">DEVELOPING</a></li></ul>



            
<span style="display: none">
    <span id="busuanzi_container_page_pv" title="文章总阅读量">
        <i class="icon icon-eye icon-pr"></i><span id="busuanzi_value_page_pv"></span>
    </span>
</span>



        </div>
        <div class="post-content" id="post-content" itemprop="postContent">
            <p>9102年了, 学习React其实完全可以从react-hooks开始, 这也是我写这篇文章的初衷。</p>
<p>另外我也希望能用比较简洁的语言来解释一些相关的原理, 不过本文还是会以如何使用为主, 所以比较适合想了解个大概后快速上手去写的人。</p>
<p>本文主要内容是解释如何基于Typescript来写React组件, 需要你有javascript基础, 对html有一定的认识。</p>
<h1 id="准备环境"><a href="#准备环境" class="headerlink" title="准备环境"></a>准备环境</h1><h2 id="开发环境"><a href="#开发环境" class="headerlink" title="开发环境"></a>开发环境</h2><p>已经装过的可以跳过</p>
<ol>
<li>安装<a href="https://nodejs.org" target="_blank" rel="noopener">node</a> 8.10以上的版本, 最好就用最新版</li>
<li>安装<a href="https://www.yarnpkg.com" target="_blank" rel="noopener">yarn</a></li>
<li>修改yarn的registry, 执行下列命令即可<pre><code class="shell">yarn config set registry http://registry.npm.taobao.org/
</code></pre>
</li>
<li>安装<a href="https://code.visualstudio.com/" target="_blank" rel="noopener">vscode</a>, 这是对ts支持最好的editor了, 没必要用其他的</li>
</ol>
<h2 id="创建项目"><a href="#创建项目" class="headerlink" title="创建项目"></a>创建项目</h2><p><em>你可以使用已有的项目, 或者parcel, webpack等其他构建工具。</em></p>
<pre><code class="shell">$ mkdir react-quickstart &amp;&amp; cd react-quickstart
$ yarn create umi
</code></pre>
<p>为了使项目结构简单一点，这里选择<code>app</code>，并选择使用typescript，最后勾选antd。</p>
<p>然后将<code>src/layouts</code> 和 <code>src/pages</code> 下的文件都删掉，然后在<code>src/pages</code>下创建<code>index.jsx</code>，加上以下内容。</p>
<pre><code class="tsx">import * as React from &quot;react&quot;;

export default function Index() {
  return &lt;span&gt;hello world&lt;/span&gt;;
};
</code></pre>
<ul>
<li>yarn install</li>
<li>yarn start</li>
</ul>
<p>打开 <a href="http://localhost:8000/" target="_blank" rel="noopener">http://localhost:8000/</a>, 就能在屏幕上看到 hello world 了。</p>
<h1 id="React入门"><a href="#React入门" class="headerlink" title="React入门"></a>React入门</h1><h2 id="认识组件"><a href="#认识组件" class="headerlink" title="认识组件"></a>认识组件</h2><p>使用react你唯一需要做的事情就是写组件, react里的组件和其他UI框架差不多, 就是封装了一系列UI和行为的代码.</p>
<p>上面我们在<code>src/pages/index.jsx</code>里定义了一个页面, 这个页面本身就是一个组件. 在react里定义一个组件的方法如下</p>
<pre><code class="tsx">// FC is Function Component
function Index() {
  return &lt;span&gt;hello world&lt;/span&gt;;
};
</code></pre>
<p>没错, 组件就是一个函数(让我们先忽视类的写法), 对于没有状态的组件我们可以将其当作一个纯函数. 比如下面我们用ts来申明组件的参数：</p>
<pre><code class="tsx">const Index: React.FC&lt;{ name: string; }&gt; = (props) =&gt; {
  return &lt;span&gt;hello {props.name}&lt;/span&gt;;
};
</code></pre>
<p>这个组件有一个 <strong>参数</strong> 用户名(输入), 以及对应返回的<strong>Virtual DOM</strong>(输出).</p>
<h2 id="Inversion-of-Control"><a href="#Inversion-of-Control" class="headerlink" title="Inversion of Control"></a>Inversion of Control</h2><p>React是一个典型的IoC框架, 我们只要写好组件交付给React, 它能帮我们处理好UI(HTML DOM)的创建, 更新和销毁.</p>
<pre><code>             组件                 React
Properties -------&gt; Virtual DOM --------&gt; HTML DOM
</code></pre><h2 id="JSX-TSX"><a href="#JSX-TSX" class="headerlink" title="JSX(TSX)"></a>JSX(TSX)</h2><p>上面例子里每个组件都返回了类似HTML的表达式, 这就是JSX.</p>
<p>我觉得<a href="https://reactjs.org/docs/introducing-jsx.html" target="_blank" rel="noopener">官方文档</a>讲得挺清楚了，你可以花几分钟看一下。另外<a href="https://reactjs.org/docs/jsx-in-depth.html" target="_blank" rel="noopener">这篇文档</a>讲得比较详细，建议简单看一遍，遇到了问题可以多查阅。</p>
<p>你只要理解下面两点就能完全掌握JSX：</p>
<ol>
<li>JSX本身就是<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Guide/Expressions_and_Operators#%E8%A1%A8%E8%BE%BE%E5%BC%8F" target="_blank" rel="noopener"><strong>JS表达式(Expression)</strong></a></li>
<li>JSX里可以在参数部分（包括children参数）用花括号(<code>{</code>和<code>}</code>)内嵌<strong>JS表达式</strong>。</li>
</ol>
<h3 id="JSX范式"><a href="#JSX范式" class="headerlink" title="JSX范式"></a>JSX范式</h3><p>下面列了一些比较常见的JSX写法</p>
<h4 id="条件渲染"><a href="#条件渲染" class="headerlink" title="条件渲染"></a>条件渲染</h4><ol>
<li><p>在组件内<br><code>`</code>jsx<br>function MyComponent(props) {<br>if (props.visible) {<br> return ‘Hi, I\’m visible.’;<br>}</p>
<p>return ‘I\’m invisible now.’;<br>}</p>
</li>
</ol>
<p><mycomponent visible> // Hi, I\’m visible.</mycomponent></p>
<p><mycomponent visible="{false}"> // I\’m invisible now.</mycomponent></p>
<p><mycomponent> // I\’m invisible now.</mycomponent></p>
<pre><code>
2. 在JSX内，会用到花括号嵌入JS表达式来实现。由于JS中`if..else..`不是表达式，所以会使用逻辑运算符(`&amp;&amp;`或`||`)和三元表达式(`.. ? .. : ..`)
```jsx
function Greeting(props) {
  return (
    &lt;span style={{ color: 'red' }}&gt;
      {props.lang === &#39;janpanese&#39; ? &#39;こんにちは&#39; : &#39;Hello&#39;}
      {props.emphasis &amp;&amp; &#39;!&#39;}
    &lt;/span&gt;
  );
}

&lt;Greeting /&gt; // &lt;span&gt;Hello&lt;/span&gt;
&lt;Greeting lang=&quot;janpanese&quot; /&gt; // &lt;span&gt;こんにちは&lt;/span&gt;
&lt;Greeting lang=&quot;janpanese&quot; emphasis /&gt; // &lt;span&gt;こんにちは!&lt;/span&gt;
</code></pre><h4 id="列表渲染"><a href="#列表渲染" class="headerlink" title="列表渲染"></a>列表渲染</h4><p>把一系列数据渲染一个列表或者表格也是相当常见的需求，在JSX里我们可以使用数组上的<code>map</code>方法来实现</p>
<pre><code class="jsx">function Ranking(props) {
  return (
    &lt;div&gt;
      {props.value &amp;&amp; props.value.map((name, index) =&gt; (
        // 这里需要给列表每一项加上一个id
        &lt;div key={index}&gt;{index + 1}. {name}&lt;/div&gt;
      ))}
    &lt;/div&gt;
  )
}

&lt;Ranking /&gt; // &lt;div&gt;&lt;/div&gt;
&lt;Ranking value={[]} /&gt; // &lt;div&gt;&lt;/div&gt;
&lt;Ranking value={[&#39;dio&#39;, &#39;kars&#39;, &#39;kirayoshikage&#39;, &#39;Diavolo&#39;]} /&gt;
/* output:
&lt;div&gt;
  &lt;div&gt;1. dio&lt;/div&gt;
  &lt;div&gt;2. kars&lt;/div&gt;
  &lt;div&gt;3. kirayoshikage&lt;/div&gt;
  &lt;div&gt;4. Diavolo&lt;/div&gt;
&lt;/div&gt;
*/
</code></pre>
<p>这个例子有两个小技巧：</p>
<ol>
<li>利用<code>&amp;&amp;</code>来判空，兼容<code>value</code>未传入的情况(此时<code>value === undefined</code>)。因为这里没有定义参数类型，使用者可能会传入任何值，所以需要做一些简单处理。不过在使用typescript后就不存在这种问题了。</li>
<li><code>map</code>中传入的箭头函数其实是以下函数的缩写，<pre><code class="jsx">(name, index) =&gt; {
return (
 &lt;div&gt;{index + 1}. {name}&lt;/div&gt;
);
}
</code></pre>
</li>
</ol>
<h5 id="为什么渲染列表时需要传入key这个参数"><a href="#为什么渲染列表时需要传入key这个参数" class="headerlink" title="为什么渲染列表时需要传入key这个参数"></a>为什么渲染列表时需要传入key这个参数</h5><p>这是由于React的<a href="https://reactjs.org/docs/reconciliation.html#recursing-on-children" target="_blank" rel="noopener">diff算法</a>所决定的，我们需要给列表中每项一个在当前列表内的唯一ID。你可以参考<a href="https://reactjs.org/docs/lists-and-keys.html#keys" target="_blank" rel="noopener">这篇文章</a>来选择key。</p>
<h4 id="封装复杂的渲染逻辑"><a href="#封装复杂的渲染逻辑" class="headerlink" title="封装复杂的渲染逻辑"></a>封装复杂的渲染逻辑</h4><p>当你在一个组件内的JSX写得越来越复杂时，可以将部分逻辑抽离出来单独写一个组件，如果你认为这些逻辑没什么可复用性，再写一个组件要传很多参数比较麻烦，那么单独抽离成一个函数也可以。</p>
<pre><code class="jsx">function ComplexComponent() {
  // some state code...
  const displayType = ...;

  function renderChart() {
    // codes
  }

  function renderTable() {
    // codes
  }

  return (
    &lt;div className=&quot;some-layout-style&quot;&gt;
      &lt;div&gt;
        { /* some complex jsx */ }
      &lt;/div&gt;
      {displayType === &#39;chart&#39; ? renderChart() : renderTable()}
    &lt;/div&gt;
  )
}
</code></pre>
<p>有时候也可以将组件里一些重复用到的JSX写到一个函数内</p>
<pre><code class="jsx">function TopOfTheYear(props) {

  function renderRank(value) {
    return value &amp;&amp; value.map((name, index) =&gt; (
      &lt;div&gt;{index + 1}. {name}&lt;/div&gt;
    ));
  }

  return (
    &lt;div&gt;
      &lt;div&gt;ANIMES:&lt;/div&gt;
      {renderRank(props.animes)}
      &lt;div&gt;MOVIES:&lt;/div&gt;
      {renderRank(props.movies)}
    &lt;/div&gt;
  )
}
</code></pre>
<p>出现嵌套列表时也可以递归调用，比如下面递归渲染的树</p>
<pre><code class="jsx">function Tree(props) {
  function renderTreeNodes(nodes) {
    return nodes.map((node, i) =&gt; (
      &lt;div className=&quot;children&quot;&gt;
        {node.name}
        {nodes.children &amp;&amp; (
          &lt;div className=&quot;children&quot;&gt;
            {renderTreeNodes(nodes.children)}
          &lt;/div&gt;
        )}
      &lt;/div&gt;
    ))
  }

  return (
    &lt;div className=&quot;tree-root&quot;&gt;
      {props.value &amp;&amp; renderTreeNodes(props.value)}
    &lt;/div&gt;
  );
}
</code></pre>
<h3 id="通常我们在刚写jsx时会有疑惑，为什么需要import-react？"><a href="#通常我们在刚写jsx时会有疑惑，为什么需要import-react？" class="headerlink" title="通常我们在刚写jsx时会有疑惑，为什么需要import react？"></a>通常我们在刚写jsx时会有疑惑，为什么需要import react？</h3><p>因为JSX被编译出来的JS表达式会使用<code>React</code>，比如下面的例子</p>
<pre><code class="jsx">// 编译前
const virtualDom = (
  &lt;MyButton color=&quot;blue&quot; shadowSize={2}&gt;
    Click Me
  &lt;/MyButton&gt;
);

// 编译后
const virtualDom = React.createElement(
  MyButton,
  { color: &#39;blue&#39;, shadowSize: 2 },
  &#39;Click Me&#39;
);
</code></pre>
<p>这里编译后不会自动帮我们加上import，所以需要我们手动加了。如果你不喜欢手动写import，可以通过配置打包工具来少些几行代码，比如<a href="https://stackoverflow.com/questions/35162343/webpack-automatically-require-a-file-in-all-files" target="_blank" rel="noopener">webpack的配置方法</a>。</p>
<p>这个其实在上面的<a href="https://reactjs.org/docs/jsx-in-depth.html#react-must-be-in-scope" target="_blank" rel="noopener">文档</a>里就有解答，遇到了问题多看看文档。</p>
<h2 id="状态"><a href="#状态" class="headerlink" title="状态"></a>状态</h2><p>上面我们写的都是<strong>纯函数组件</strong>，但是大部分情况组件都会有内部状态，下面让我们看看怎么给组件添加状态。</p>
<p><em>PS: 有状态的组件称为<strong>函数组件</strong></em></p>
<p>引入状态对应的API是<code>React.useState</code>，看下面的例子</p>
<pre><code class="jsx">import { useState } from &#39;react&#39;;

function Counter() {
  // 这里声明了我们要使用一个初始值为 0 的状态
  const [count, setCount] = useState(0);
  // count只有在第一次渲染时使用初始值，之后都是内部维持的状态
  // setCount用来更新状态
  return (
    &lt;div&gt;
      &lt;div&gt;count: {count}&lt;/div&gt;
      &lt;button
        onClick={() =&gt; setCount(count + 1)}
      &gt;+&lt;/button&gt;
    &lt;/div&gt;
  )
}
</code></pre>
<h3 id="复杂状态"><a href="#复杂状态" class="headerlink" title="复杂状态"></a>复杂状态</h3><p>有时候状态可能是个复杂的对象，和上面用法差不多，但要注意的是你只更新对象上的一个变量时，也需要生成一个<strong>新对象</strong>。</p>
<p>只是简单更新单层对象可以参考以下范式</p>
<pre><code class="javascript">const obj1 = { a: 1, b: 2 };
// 解构
const obj2 = { ...obj1, b: 3 }; // { a: 1, b: 3 }
// Object.assign方法
const obj3 = Object.assign({}, obj1, { a: 2 }); // { a: 2, b: 2 }
</code></pre>
<p>例子</p>
<pre><code class="jsx">import { useState } from &#39;react&#39;;

function Counter() {
  const [state, setState] = useState({ count: 0, other: &#39;a&#39; });
  return (
    &lt;div&gt;
      &lt;div&gt;count: {state.count}&lt;/div&gt;
      &lt;button
        onClick={() =&gt; setState({
          // 这里setState会覆盖掉之前的状态，所以要保留other的话，需要将新旧对象合并到一起
          ...state,
          count: state.count + 1,
        })}
      &gt;+&lt;/button&gt;
    &lt;/div&gt;
  )
}
</code></pre>
<h3 id="分离逻辑（useReducer）"><a href="#分离逻辑（useReducer）" class="headerlink" title="分离逻辑（useReducer）"></a>分离逻辑（useReducer）</h3><p>todo<br><a href="https://reactjs.org/docs/hooks-reference.html#usereducer" target="_blank" rel="noopener">https://reactjs.org/docs/hooks-reference.html#usereducer</a></p>
<h3 id="多个状态"><a href="#多个状态" class="headerlink" title="多个状态"></a>多个状态</h3><p><code>useState</code>可以在一个组件中创建任意数量的状态，但你不能在条件、循环和嵌套函数里调用。</p>
<pre><code class="javascript">import { useState } from &#39;react&#39;;

function Counter(props) {
  // 你只能在函数的顶级调用
  const [c, s] = useState(0);
  // error: 不能放到任何条件block内
  if (props.visible) {
    const [c, s] = useState(0);
  }
  // error: 同上
  const [c, s] = props.visible ? useState(0) : useState(99);

  function renderContent() {
    // error: 不能在嵌套函数中调用
    const [c, s] = useState(0);
  }

  // ...
}
</code></pre>
<p>你不用死记这些，因为有eslint会帮你发现这些错误，你只要遇到了知道是什么原因就行。</p>
<h3 id="为什么要按固定的顺序调用？"><a href="#为什么要按固定的顺序调用？" class="headerlink" title="为什么要按固定的顺序调用？"></a>为什么要按固定的顺序调用？</h3><p>函数组件的状态是由React帮你维护的，每次调用<code>useState</code>，React就会找到对应的状态返回给你，这是很经典的依赖注入的思想。</p>
<p>下面的例子相信很容易理解</p>
<pre><code class="javascript">// react 内部的状态列表 internal_state = [&#39;a&#39;, &#39;b&#39;, &#39;c&#39;]
const [a] = useState(&#39;a&#39;); // 返回 internal_state[0]
const [b] = useState(&#39;b&#39;); // 返回 internal_state[1]
const [c] = useState(&#39;c&#39;); // 返回 internal_state[2]

// 如果某些原因导致顺序发生了变化，拿到的值就不正确了
const [a] = useState(&#39;a&#39;); // 返回 internal_state[0]
const [c] = useState(&#39;c&#39;); // 返回 internal_state[1]
const [b] = useState(&#39;b&#39;); // 返回 internal_state[2]
</code></pre>
<h2 id="useEffect（组件生命周期）"><a href="#useEffect（组件生命周期）" class="headerlink" title="useEffect（组件生命周期）"></a>useEffect（组件生命周期）</h2><h3 id="React-hook"><a href="#React-hook" class="headerlink" title="React hook"></a>React hook</h3><p>上面提到的<code>useState</code>、<code>useReducer</code>以及接下来介绍的<code>useEffect</code>都是<code>React hook</code>，hook你可以理解为函数组件内可以使用的一系列工具，通常 <em>约定</em> 以<code>use</code>开头。</p>
<h3 id="如何监听生命周期"><a href="#如何监听生命周期" class="headerlink" title="如何监听生命周期"></a>如何监听生命周期</h3><p>如果你之前接触过React，那你可能知道一些很常用的<strong>生命周期方法</strong>，像<code>componentDidMount</code>（组件第一次渲染后）、<code>componentDidUpdate</code>（组件每次更新后）等等。</p>
<p>这些生命周期方法对于一个组件是非常重要的，在函数组件里我们可以使用<code>useEffect</code>来实现。</p>
<p>下面是个如何监听页面滚动的例子，我们需要在组件<strong>挂载到节点</strong>后添加事件监听，并在组件<strong>销毁时</strong>移除事件监听以免内存泄漏。</p>
<pre><code class="javascript">import { useEffect } from &#39;react&#39;;

function MyComponent() {
  // 滚动事件的监听函数
  function scrollHandler() {}

  // 基本等同于componentDidMount
  useEffect(() =&gt; {
    document.addEventListener(&#39;scroll&#39;, scrollHandler);

    // 这里返回的函数会在组件销毁前被调用
    return () =&gt; {
      document.removeEventListener(&#39;scroll&#39;, scrollHandler);
    };
  }, []);

  return &lt;div&gt;...&lt;/div&gt;
}
</code></pre>
<h3 id="useEffect"><a href="#useEffect" class="headerlink" title="useEffect"></a>useEffect</h3><p><code>useEffect</code>会接收两个参数，第一个参数是一个函数A，其会在<strong>适当的时机</strong>被调用，该函数如果返回了一个函数B，函数B被称为<code>clean up</code>函数，B会在<strong>下一次A被调用前</strong>或者<strong>组件销毁前</strong>被调用。</p>
<p>第二个参数用来提示A的<strong>调用时机</strong>，通常有3种情况：</p>
<ol>
<li><p>传入<code>undefined</code>(等同不传)：这种情况会在每次渲染时调用A，可以理解为在组件首次渲染或者更新时调用。</p>
<p> 这种情况使用得不多，通常用来手动跟踪某些值和节点的变化。</p>
</li>
<li><p>传入<code>[]</code>：这种情况会在组件首次渲染时调用。</p>
<p> 通常用于组件内发起一次性的请求。</p>
<pre><code class="js"> const [result, setResult] = useState();
 const [loading, setLoading] = useState(true);

 useEffect(() =&gt; {
   // 这里你不能直接使用async function，因为它会返回的Promise会被误认为cleanup函数
   async function fn() {
     setResult(await fetchSomething());
     setLoading(false);
   }
   fn();
 }, [])
</code></pre>
</li>
<li><p>传入非空数组：在2的基础上，如果数组中任意值发生了变化，就会去调用。</p>
<p> 通常用来监听某些状态的变化并执行一些副作用函数，比如将状态保存到浏览器。</p>
<pre><code class="js"> const [value, setValue] = useState(() =&gt; localStorage.getItem(&#39;VALUE_ID&#39;));

 useEffect(() =&gt; {
   // 每次value变化就会将其持久化到浏览器
   localStorage.setItem(&#39;VALUE_ID&#39;, value);
 }, [value]);
</code></pre>
</li>
</ol>
<h1 id="使用typescript来写React组件"><a href="#使用typescript来写React组件" class="headerlink" title="使用typescript来写React组件"></a>使用typescript来写React组件</h1><h2 id="为什么要用typescript"><a href="#为什么要用typescript" class="headerlink" title="为什么要用typescript?"></a>为什么要用typescript?</h2><p>没有类型辅助写大中型项目(尤其在多人协作方面)是件心智负担很重的事, typescript是目前使用最为广泛的 compile to javascript 语言. 当然你也可以使用 flow, reasonml, elm 等语言, 不过这些不是本文的目标。</p>
<p>如果只想用js, 那么只需要将文件后缀改为 jsx 并且去掉所有类型即可。</p>
<p>本节只会解释本文会用到的ts特性, 深入可以参考推荐阅读里的内容。</p>
<h2 id="你需要知道的Typescript"><a href="#你需要知道的Typescript" class="headerlink" title="你需要知道的Typescript"></a>你需要知道的Typescript</h2><p>ts里大部分时间不需要显式声明类型, 因为它能自动推断。</p>
<pre><code class="typescript">// 基础类型
const a: number = 1;
const b: string = &#39;abc&#39;;
const c: boolean = true;
const d: undefined = undefined;
const e: null = null;

// 函数类型
function parseInt(input: string, radix?: number): number {　／* implement code */　}
// 箭头函数类型
const parseInt: (input: string, radix?: number) =&gt; number = (input, radix) =&gt; { ／* implement code */ };

// Union Type
let union: number | string | undefined = 1;
union = undefined; // ok
union = &#39;ok&#39;; // ok

// 字面量类型
const f: &#39;jotaro&#39; | &#39;giorno&#39; = &#39;giorno&#39;;
const g: 1 | 2 = 3; // ts will throw error
// 对象字面量类型
const obj: { field: string } = { field: &#39;abc&#39; };

// 接口
interface A {
  message?: string; // &#39;?&#39;将会给类型添加undefined, 这里相当于 string | undefined
}
const h: A = { message: &#39;now&#39; };
const i: A = {}; // message is undefined

const j = { message: &#39;now&#39; }; // 如果我们不加类型定义, 这里j会被推断为 { message: string }
</code></pre>
<h2 id="Type-Compatibility"><a href="#Type-Compatibility" class="headerlink" title="Type Compatibility"></a>Type Compatibility</h2><p>ts里如果两个接口的每项参数的类型是匹配的那么, 这两个接口就是匹配的. 比如下面两个接口在ts里其实没有什么区别</p>
<pre><code class="typescript">interface Point {
  x: number;
  y: number;
}

interface Rectangle {
  x: number;
  y: number;
}
</code></pre>
<p>这个特性主要对于经常出现的对象字面量很有帮助</p>
<pre><code class="typescript">interface A {
  message?: string;
}
let obj = { message: &#39;now&#39; }; // 这个对象的类型是 { message: string }
// 虽然这个类型和A不是同一个类型，但是它们是兼容的, 所以这里可以将这个对象赋值给类型为 A 的变量 h.
const h: A = obj;
</code></pre>
<p>Union Type和其他字面量类型也是很符合直觉的</p>
<pre><code class="typescript">const a = &#39;a&#39;;
const b: &#39;a&#39; | &#39;b&#39; = a; // ok
const c: string | number = b; // ok
const d: number = c; // error
if (typeof c === &#39;number&#39;) {
  const e: number = c; // ok, c is number type here
}
</code></pre>
<p>还有其他比如函数、枚举、泛型的类型匹配可以看<a href="https://www.typescriptlang.org/docs/handbook/type-compatibility.html" target="_blank" rel="noopener">官方文档</a>。因为这些比较少用到，所以碰到了再看文档就行。</p>
<h2 id="泛型"><a href="#泛型" class="headerlink" title="泛型"></a>泛型</h2><p>和其他语言差不多, 在本文里就不深入解释了</p>
<h2 id="import"><a href="#import" class="headerlink" title="import"></a>import</h2><p>通常你会看到在很多项目的tsx文件里会这么import react</p>
<pre><code class="typescript">import * as React from &#39;react&#39;;
</code></pre>
<p>这种写法是因为react本身是没有<code>export default</code>，而且ts不像js会默认去兼容commonjs的写法，所以你需要<a href="https://www.typescriptlang.org/docs/handbook/modules.html#import" target="_blank" rel="noopener">import entire module</a>。如果你不喜欢这种写法，可以修改<code>tsconfig.json</code>来兼容。</p>
<h1 id="编写可维护的组件"><a href="#编写可维护的组件" class="headerlink" title="编写可维护的组件"></a>编写可维护的组件</h1><p>todo</p>
<h1 id="推荐阅读"><a href="#推荐阅读" class="headerlink" title="推荐阅读"></a>推荐阅读</h1><ul>
<li><a href="https://reactjs.org/docs/hello-world.html" target="_blank" rel="noopener">React官方文档</a></li>
<li><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" rel="noopener">Typescript handbook</a></li>
<li><a href="https://basarat.gitbooks.io/typescript/docs/getting-started.html" target="_blank" rel="noopener">Typescript Deep Dive</a></li>
</ul>
<h1 id="常用组件和库"><a href="#常用组件和库" class="headerlink" title="常用组件和库"></a>常用组件和库</h1><ul>
<li><a href="https://ant.design/" target="_blank" rel="noopener">ant design</a>: UI组件</li>
<li><a href="https://lodash.com/" target="_blank" rel="noopener">lodash</a>: 函数库</li>
<li><a href="https://momentjs.com/docs/" target="_blank" rel="noopener">moment</a>: 时间工具</li>
</ul>

        </div>

        <blockquote class="post-copyright">
    
    <footer>
        <a href="https://frezc.github.io">
            <img src="/images/avatar.jpg" alt="Freeze Crow">
            Freeze Crow
        </a>
    </footer>
</blockquote>

        


        <div class="post-footer">
            
	<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/react/">react</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/react-hooks/">react-hooks</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/tutorial/">tutorial</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/typescript/">typescript</a></li></ul>


            
<div class="page-share-wrap">
    

<div class="page-share" id="pageShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=https://frezc.github.io/2019/05/16/typescript-react-hooks-quickstart/&title=《React & React-Hooks & Typescript 快速入门 (draft)》 — Code for fun&pic=https://frezc.github.io/images/avatar.jpg" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=https://frezc.github.io/2019/05/16/typescript-react-hooks-quickstart/&title=《React & React-Hooks & Typescript 快速入门 (draft)》 — Code for fun&source=Freeze crow 's blog" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://frezc.github.io/2019/05/16/typescript-react-hooks-quickstart/" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《React & React-Hooks & Typescript 快速入门 (draft)》 — Code for fun&url=https://frezc.github.io/2019/05/16/typescript-react-hooks-quickstart/&via=https://frezc.github.io" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=https://frezc.github.io/2019/05/16/typescript-react-hooks-quickstart/" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>



    <a href="javascript:;" id="shareFab" class="page-share-fab waves-effect waves-circle">
        <i class="icon icon-share-alt icon-lg"></i>
    </a>
</div>



        </div>
    </div>

    
<nav class="post-nav flex-row flex-justify-between">
  
    <div class="waves-block waves-effect prev">
      <a href="/2019/05/25/leetcode-largest-rectangle-in-histogram/" id="post-prev" class="post-nav-link">
        <div class="tips"><i class="icon icon-angle-left icon-lg icon-pr"></i> Prev</div>
        <h4 class="title">leetcode #84 直方图内最大矩形解题思路</h4>
      </a>
    </div>
  

  
    <div class="waves-block waves-effect next">
      <a href="/2019/04/26/relative-time-expression/" id="post-next" class="post-nav-link">
        <div class="tips">Next <i class="icon icon-angle-right icon-lg icon-pl"></i></div>
        <h4 class="title">相对时间表达式 —— 解决相对时间序列化的问题</h4>
      </a>
    </div>
  
</nav>



    


<section class="comments" id="comments">
    <div id="disqus_thread"></div>
    <script>
    var disqus_shortname = 'frezc';
    lazyScripts.push('//' + disqus_shortname + '.disqus.com/embed.js')
    </script>
    <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</section>



















</article>



</div>

        <footer class="footer">
    <div class="top">
        
<p style="display: none">
    <span id="busuanzi_container_site_uv">
        站点总访客数：<span id="busuanzi_value_site_uv"></span>
    </span>
    <span id="busuanzi_container_site_pv">
        站点总访问量：<span id="busuanzi_value_site_pv"></span>
    </span>
</p>


        <p>
            
                <span><a href="/atom.xml" target="_blank" class="rss" title="rss"><i class="icon icon-lg icon-rss"></i></a></span>
            
            <span>博客内容遵循 <a rel="license" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh">知识共享 署名 - 非商业性 - 相同方式共享 4.0 国际协议</a></span>
        </p>
    </div>
    <div class="bottom">
        <p><span>Freeze Crow &copy; 2015 - 2022</span>
            <span>
                
                Power by <a href="http://hexo.io/" target="_blank">Hexo</a> Theme <a href="https://github.com/yscoder/hexo-theme-indigo" target="_blank">indigo</a>
            </span>
        </p>
    </div>
    
        <!-- Highlight.js -->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.8/styles/github-gist.min.css">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.8/highlight.min.js">
        </script>
        <script>
            hljs.initHighlightingOnLoad();
        </script>
    
</footer>

    </main>
    <div class="mask" id="mask"></div>
<a href="javascript:;" id="gotop" class="waves-effect waves-circle waves-light"><span class="icon icon-lg icon-chevron-up"></span></a>



<div class="global-share" id="globalShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=https://frezc.github.io/2019/05/16/typescript-react-hooks-quickstart/&title=《React & React-Hooks & Typescript 快速入门 (draft)》 — Code for fun&pic=https://frezc.github.io/images/avatar.jpg" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=https://frezc.github.io/2019/05/16/typescript-react-hooks-quickstart/&title=《React & React-Hooks & Typescript 快速入门 (draft)》 — Code for fun&source=Freeze crow 's blog" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://frezc.github.io/2019/05/16/typescript-react-hooks-quickstart/" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《React & React-Hooks & Typescript 快速入门 (draft)》 — Code for fun&url=https://frezc.github.io/2019/05/16/typescript-react-hooks-quickstart/&via=https://frezc.github.io" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=https://frezc.github.io/2019/05/16/typescript-react-hooks-quickstart/" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>


<div class="page-modal wx-share" id="wxShare">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <p>扫一扫，分享到微信</p>
    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAN4AAADeCAAAAAB3DOFrAAACtUlEQVR42u3aQW7DMAwEwP7/0y3Qa2Nnl5KSFBifisCwNTpY7JJfX/H1/Xsl9/y98+qX+9+T52y78PDw8EZLv7ru77l6/Yx0v63Jeh48Bw8PD+8YL3n0/Z1Xm5J81pONS56Gh4eH92m8pODOP9l5mZ6vBw8PD+//8pIPev5MPDw8vM/kJWFEfgy0MW4bcBzJWvDw8PBiXtsA+4S/D/b38PDw8Ba66nm0mhwnJw6AJ2vAw8PDO8DL21crzf7XFMrFfwx4eHh4W3kzTH4k5AMB9+widMbDw8PbylsphfPotg0UZuX7g3Xi4eHhHeC1RWpb2ravb4vpYoAADw8PbysvL1hng1CzwayVVRX7jYeHhzfitUMD+cjU5qVs2mg8PDy8Fd4seM1r8ySozZ9Zt8Hw8PDwXsLLR6naGDcvi1fe9eRgwMPDwzvMm4WzeatspYkVUfHw8PBeyKt7ZZs2azbgdbkSPDw8vAO8tghOhrSStLgF5KHJJR4PDw9vK2/GaIPd/Pd2aKAorPHw8PCWeW0jP48hVqKHZFuT9eDh4eGd5s1C1fWPeBtS5BuEh4eH9y7esPkUxAT1cuOjCw8PD+80Lx97SsrovAiewYpNxMPDwzvAm7X82yZWXqYnG1eEEXh4eHiHebMRqDbwbY+KWVSBh4eHd463XhDPPvrrbbboSMPDw8N7CW8l2F1pVrUf/WjNeHh4eAd4s2ZVPgqQlM4r21q0x/Dw8PA28b7LKw9qk4GDtt21IYzAw8PDW+blV9vCn330czweHh7ee3mzf/Jn0Wp7POQxR3Qi4eHh4W3ltU39WSm8EukOLXh4eHhv5SUFcbLE5I3taFfU+sLDw8N7Ey8hrRfHKwX9gzACDw8P7wBvJYxoP+K7opDoOMHDw8M7wJuNTLUBRHJ4tMHHsJuHh4eHN+f9AKPOu2Dauj/UAAAAAElFTkSuQmCC" alt="微信分享二维码">
</div>





<script src="https://unpkg.com/mermaid@8.9.2/dist/mermaid.min.js"></script>
<script>
    if (window.mermaid) {
    mermaid.initialize({theme: 'forest'});
    }
</script>


    <script src="//cdn.bootcss.com/node-waves/0.7.4/waves.min.js"></script>
<script>
var BLOG = { ROOT: '/', SHARE: true, REWARD: false };


</script>

<script src="//unpkg.com/hexo-theme-material-indigo@latest/js/main.min.js"></script>


<div class="search-panel" id="search-panel">
    <ul class="search-result" id="search-result"></ul>
</div>
<template id="search-tpl">
<li class="item">
    <a href="{path}" class="waves-block waves-effect">
        <div class="title ellipsis" title="{title}">{title}</div>
        <div class="flex-row flex-middle">
            <div class="tags ellipsis">
                {tags}
            </div>
            <time class="flex-col time">{date}</time>
        </div>
    </a>
</li>
</template>

<script src="//unpkg.com/hexo-theme-material-indigo@latest/js/search.min.js" async></script>



<!-- mathjax config similar to math.stackexchange -->

<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';
    }
});
</script>

<script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML"></script>




<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>





</body>
</html>
